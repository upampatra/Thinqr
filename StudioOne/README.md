# AI Credit Memo Assistant

An AI-powered text editor to help write credit memos. Upload financial documents and let the AI assist in drafting sections based on a contextual template.

## Core Features

-   **Simulated User Authentication:** Simple login flow to access the application.
-   **Document Upload:** Drag-and-drop and file selection for financial documents (PDF, PNG, JPG). Uploaded files are processed and stored in-memory for analysis.
-   **AI-Powered Content Generation:**
    -   **Section Generation:** Users can select standard credit memo sections (e.g., Executive Summary, SWOT Analysis) to be auto-generated by an AI based on the content of uploaded documents.
    -   **Conversational AI Chat:** A chat interface allows users to ask follow-up questions or make specific requests related to their financial documents.
-   **Interactive Memo Editor:** A central editor where the final credit memo is composed. Generated content can be inserted directly into the editor.
-   **Editable AI Context:** A "Context Guide" panel displays the structural template (`context.md`) used to guide the AI. This guide can be edited by the user in real-time to customize the AI's output.
-   **Usage Tracking & Subscription Tiers:** The application tracks the number of AI generations used and enforces limits based on the user's subscription tier (Free/Pro), with a modal to handle upgrades.

## Technical Stack

-   **Framework:** React with TypeScript
-   **Styling:** Tailwind CSS (configured directly in `index.html`)
-   **AI Integration:** Google Gemini (inferred from `geminiService.ts` and the `importmap` in `index.html`)
-   **Development Server:** Vite

## Project Structure

```
.
├── assets
│   └── context.md        # Markdown template for credit memo structure.
├── components
│   ├── icons/            # SVG icon components.
│   ├── ContextViewer.tsx # Component to display and edit the context guide.
│   ├── Editor.tsx        # The main credit memo text editor.
│   ├── FileUpload.tsx    # Handles drag-and-drop file uploads.
│   ├── Header.tsx        # Top navigation bar with user info and usage.
│   ├── Login.tsx         # Simulated login screen.
│   ├── SuggestionsPanel.tsx # The AI assistant panel with chat and generation buttons.
│   └── UpgradeModal.tsx  # Modal for subscription upgrades.
├── services
│   └── geminiService.ts  # (Inferred) Handles API calls to the Google Gemini service.
├── types
│   └── index.ts          # (Inferred from App.tsx) TypeScript type definitions.
├── App.tsx               # Main application component, manages state and logic.
├── index.html            # HTML entry point, includes Tailwind CSS.
├── index.tsx             # Renders the React application.
└── metadata.json         # Project metadata.
```

## How It Works

1.  **Authentication:** The user starts at a `Login` screen and proceeds to the main app. State is managed in `App.tsx`.
2.  **State Management:** The main `App.tsx` component serves as the single source of truth, managing state for `user`, `uploadedFiles`, `memoContent`, `messages`, and UI toggles using `useState` hooks.
3.  **File Upload:** The `FileUpload` component allows users to select local files. It uses `FileReader` to read files as base64 strings and passes an array of `FinancialDocument` objects up to `App.tsx`.
4.  **AI Interaction:**
    -   All interactions are initiated from the `SuggestionsPanel`.
    -   **Generating a Section:** Clicking a section button (e.g., "Executive Summary") triggers `handleGenerateSection` in `App.tsx`. This function calls `generateMemoSection` from the `geminiService`, passing the section title, uploaded documents, and the current `context.md` content.
    -   **Sending a Chat Message:** Typing a message triggers `handleSendChatMessage`, which calls `generateChatResponse` with the message and document context.
    -   In both cases, the user's generation count is incremented, and the AI's response is added to the `messages` state to be displayed in the chat history.
5.  **Content Insertion:** AI-generated sections in the chat history have an "Insert into Memo" button. Clicking it calls `handleInsertSuggestion`, which intelligently adds or replaces the corresponding section in the main `Editor`.
6.  **Context Customization:** The `ContextViewer` component renders the content of `assets/context.md` in a `textarea`. Any changes made by the user update the `contextMd` state in `App.tsx`, which is then used in subsequent AI generation calls.

## How to Run

1.  Install project dependencies:
    ```bash
    npm install
    ```
2.  Start the Vite development server:
    ```bash
    npm run dev
    ```
3.  Open the application in your browser at the provided local URL (usually `http://localhost:5173`).